{"id":"SWING-1ji","title":"Create model configuration","description":"Create src/config/modelConfig.ts with model options. Enable runtime model selection.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T02:11:35.965194113Z","updated_at":"2025-12-03T02:11:35.965194113Z"}
{"id":"SWING-21o","title":"Create ExerciseDefinition interface","description":"Interface with name, positions, idealAngles (Map\u003cstring, AngleConfig\u003e), and repCriteria.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T02:12:01.187635144Z","updated_at":"2025-12-03T02:12:01.187635144Z"}
{"id":"SWING-3vi","title":"Add unit tests for SwingRepProcessor rep counting","description":"Test rep completion sequence (Release → Top). Test partial cycles. Test reset behavior.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T02:10:41.924860514Z","updated_at":"2025-12-03T03:09:48.948005756Z","closed_at":"2025-12-03T03:09:48.948005756Z","close_reason":"Completed in PR #34 - SwingAnalysis.test.ts includes PoseTrackPipeline Rep Counting tests for rep sequence, reset behavior, and partial cycles"}
{"id":"SWING-6i1","title":"Update UI to select exercise type","description":"Add exercise selection to the UI","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-03T02:12:04.306711719Z","updated_at":"2025-12-03T02:12:04.306711719Z"}
{"id":"SWING-6zp","title":"Extract SwingAnalyzer from SwingFormProcessor","description":"Move position detection logic (detectPosition), ideal angles and thresholds, cycle tracking state. Make it a pure class with no RxJS/video dependencies.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T02:11:08.553818516Z","updated_at":"2025-12-03T03:33:07.04709368Z","closed_at":"2025-12-03T03:33:07.04709368Z","close_reason":"Created SwingAnalyzer class with pure analysis logic, no RxJS/video dependencies. Includes position detection, cycle tracking, configurable thresholds, and 12 unit tests."}
{"id":"SWING-7b0","title":"Create VideoSkeletonSource","description":"Wrap VideoFrameAcquisition + PoseSkeletonTransformer. Emit Observable\u003cSkeletonEvent\u003e.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T02:11:09.391036688Z","updated_at":"2025-12-03T02:11:09.391036688Z"}
{"id":"SWING-7ii","title":"Phase 3: Unified Pipeline Refactor","description":"Extract shared analysis logic so both real-time and batch modes use the same code","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-03T02:10:54.435023161Z","updated_at":"2025-12-03T02:10:54.435023161Z"}
{"id":"SWING-7s4","title":"Create analyzer factory","description":"Function createAnalyzer(exercise: ExerciseType): ExerciseAnalyzer","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T02:12:03.246520121Z","updated_at":"2025-12-03T02:12:03.246520121Z"}
{"id":"SWING-7zf","title":"Add unit tests for SwingFormProcessor position detection","description":"Test each position (Top, Connect, Bottom, Release) with known skeleton data. Test threshold boundaries. Test cycle detection logic.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T02:10:41.084892567Z","updated_at":"2025-12-03T03:09:47.254773529Z","closed_at":"2025-12-03T03:09:47.254773529Z","close_reason":"Completed in PR #34 - SwingAnalysis.test.ts has 26 tests covering position detection for TOP, BOTTOM, CONNECT, RELEASE with skeleton angle calculations and threshold testing"}
{"id":"SWING-ama","title":"Create PoseDetectorFactory","description":"Instantiate correct model based on config. Handle different keypoint formats (COCO-17 vs MediaPipe-33).","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T02:11:36.824556318Z","updated_at":"2025-12-03T02:11:36.824556318Z"}
{"id":"SWING-bf3","title":"Create exercise-specific analyzers","description":"SwingAnalyzer (existing, refactored), PullUpAnalyzer, PistolSquatAnalyzer","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T02:12:02.388319676Z","updated_at":"2025-12-03T02:12:02.388319676Z"}
{"id":"SWING-d0l","title":"Update PoseTrackPipeline to use SwingAnalyzer","description":"Delete duplicated position detection logic (lines 354-419). Use shared SwingAnalyzer instance.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T02:11:12.483939652Z","updated_at":"2025-12-03T02:11:12.483939652Z"}
{"id":"SWING-dds","title":"Verify both paths produce identical results","description":"Add integration test comparing real-time vs batch analysis.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T02:11:13.429108589Z","updated_at":"2025-12-03T02:11:13.429108589Z"}
{"id":"SWING-dy2","title":"Create keypoint adapter","description":"Map MediaPipe keypoints to COCO format (or vice versa). Ensure Skeleton class works with both.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T02:11:38.776315912Z","updated_at":"2025-12-03T02:11:38.776315912Z"}
{"id":"SWING-f3p","title":"Update SwingFormProcessor to use SwingAnalyzer","description":"Becomes a thin wrapper that subscribes to skeleton source. Delegates to SwingAnalyzer for analysis.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T02:11:11.709999509Z","updated_at":"2025-12-03T02:11:11.709999509Z"}
{"id":"SWING-hjq","title":"Update PoseSkeletonTransformer for model abstraction","description":"Accept model type in constructor. Use factory to create detector.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T02:11:37.800917286Z","updated_at":"2025-12-03T02:11:37.800917286Z"}
{"id":"SWING-joq","title":"Phase 4: Model Abstraction (BlazePose Support)","description":"Support multiple pose detection models (MoveNet, BlazePose)","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-03T02:11:24.981873063Z","updated_at":"2025-12-03T02:11:24.981873063Z"}
{"id":"SWING-pqk","title":"Phase 5: Exercise Abstraction (Pull-ups, Pistol Squats)","description":"Support multiple exercises beyond kettlebell swings","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-03T02:11:51.022465262Z","updated_at":"2025-12-03T02:11:51.022465262Z"}
{"id":"SWING-sxk","title":"Create PoseTrackSkeletonSource","description":"Take PoseTrackFile as input. Iterate frames, build Skeleton from keypoints. Emit Observable\u003cSkeletonEvent\u003e (fast, not throttled).","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T02:11:11.06156458Z","updated_at":"2025-12-03T02:11:11.06156458Z"}
{"id":"SWING-ugd","title":"Add unit tests for PoseTrackPipeline with fixture data","description":"Test processAllFrames() returns expected results. Test seeking behavior. Test rep counting accuracy.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T02:10:42.636522471Z","updated_at":"2025-12-03T03:09:50.230772183Z","closed_at":"2025-12-03T03:09:50.230772183Z","close_reason":"Completed in PR #34 - PoseTrackPipeline.test.ts has 25 tests covering processAllFrames(), seeking behavior, frame processing, and fixture data handling"}
{"id":"SWING-vif","title":"Phase 2: Unit Tests for Analysis Pipeline","description":"Add comprehensive unit tests for the analysis pipeline using hardcoded poseTracks","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-03T02:10:31.855719574Z","updated_at":"2025-12-03T03:10:02.842992661Z","closed_at":"2025-12-03T03:10:02.842992661Z","close_reason":"All unit tests completed in PR #34: SwingAnalysis.test.ts (26 tests for position detection + rep counting) and PoseTrackPipeline.test.ts (25 tests for pipeline with fixtures). 137 unit tests total now pass."}
{"id":"swing-2v2","title":"Fix video playback tests in headless Playwright","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T03:26:39.970351835Z","updated_at":"2025-12-03T03:47:26.608911278Z","closed_at":"2025-12-03T03:47:26.608911278Z","close_reason":"Research complete. Issue is NOT codec-related. Real blocker is app bug swing-o6o (play button not working). Tests updated with accurate skip reasons.","comments":[{"id":1,"issue_id":"swing-2v2","author":"developer","text":"## Problem\n6 tests in user-journey.spec.ts are skipped because video playback doesnt work in headless Chromium.\n\n## Root Cause  \nHeadless Chromium lacks proprietary codec support (H.264/AAC) due to licensing.\n\n## Solution\nUse branded Chrome: channel: chrome in playwright.config.ts\n\n## Sources\n- https://github.com/microsoft/playwright/issues/37979\n- https://playwright.dev/docs/browsers","created_at":"2025-12-03T03:27:17Z"},{"id":2,"issue_id":"swing-2v2","author":"developer","text":"## Research Conclusion\n\nAfter researching all three alternatives:\n\n1. **FFmpeg** - NOT a solution (only for test recording, not playback)\n2. **Firefox/WebKit** - NOT recommended (unreliable headless codec support)\n3. **channel: chrome** - RECOMMENDED (full codec support, simple change)\n\n## Implementation\nAdd channel: chrome to playwright.config.ts and run npx playwright install chrome in CI.\n\n## Trade-offs\n- 200MB download vs 150MB\n- 10-15% slower than headless shell\n- Full codec support for video playback","created_at":"2025-12-03T03:32:01Z"},{"id":3,"issue_id":"swing-2v2","author":"developer","text":"## Update: WebM/VP9 works in headless Chromium!\n\nTested video playback in this container (Linux ARM64):\n- Chrome branded: NOT available on ARM64\n- WebM/VP9 in headless Chromium: WORKS\n\nThe tests were skipped when video was MP4/H.264. Since switching to WebM, playback works. The test.skip() annotations may be outdated.\n\nNext step: Remove test.skip() from video playback tests and verify they pass.","created_at":"2025-12-03T03:35:45Z"},{"id":4,"issue_id":"swing-2v2","author":"developer","text":"## Final Status\n\nResearch complete. Key findings:\n\n1. **WebM/VP9 IS supported** in headless Chromium - codec is NOT the issue\n2. **Chrome branded not available** on Linux ARM64 (this container)\n3. **Real issue identified**: App bug where play button click doesn't start playback (linked to swing-o6o)\n\nTests updated with accurate skip reasons referencing swing-o6o. 14 tests pass, 4 skipped due to app bug.","created_at":"2025-12-03T03:47:19Z"}]}
{"id":"swing-dy6","title":"Add elapsed time to extraction progress bar","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T03:26:10.483260322Z","updated_at":"2025-12-03T03:27:13.336453151Z","closed_at":"2025-12-03T03:27:13.336453151Z","close_reason":"Added elapsedTime and fps to progress, updated status bar to show: percentage, frames, elapsed time, and fps"}
{"id":"swing-en3","title":"Redraw skeleton on manual video seek","description":"When user seeks/scrubs to a different position in the video, the skeleton overlay should redraw for that frame. Currently it may not update until playback resumes.","status":"in_progress","priority":1,"issue_type":"bug","created_at":"2025-12-03T03:46:54.766114968Z","updated_at":"2025-12-03T03:47:03.420403878Z"}
{"id":"swing-o6o","title":"Debug rep counter not updating with cached poses during playback","description":"## Problem\nRep counter doesn't update when video plays with CachedPoseSkeletonTransformer (streaming mode), even though skeleton overlay renders correctly.\n\n## Context\nWhen extraction starts, VideoSection.tsx calls reinitializeWithLiveCache() which creates a new pipeline using CachedPoseSkeletonTransformer instead of the ML-based PoseSkeletonTransformer. The skeleton overlay works (proving cached poses are being read), but rep count stays at 0.\n\n## Key Files to Investigate\n- `src/hooks/useSwingAnalyzer.tsx` lines 145-170 - pipeline subscription setup, setRepCount callback\n- `src/pipeline/Pipeline.ts` - full pipeline flow: skeleton → form → rep\n- `src/pipeline/CachedPoseSkeletonTransformer.ts` - transforms frames to skeletons using cached data\n- `src/pipeline/SwingFormProcessor.ts` - detects swing positions (Top, Connect, Bottom, Release)\n- `src/pipeline/SwingRepProcessor.ts` - counts reps based on position sequence\n- `src/components/VideoSection.tsx` lines 52-60 - reinitializeWithLiveCache trigger\n\n## Pipeline Flow\n1. VideoFrameAcquisition emits FrameEvent (on video play/pause)\n2. CachedPoseSkeletonTransformer looks up cached pose → emits SkeletonEvent\n3. SwingFormProcessor detects position → emits FormEvent/checkpoint\n4. SwingRepProcessor counts reps → emits RepEvent\n5. Pipeline.resultSubject pushes to useSwingAnalyzer which calls setRepCount\n\n## Debug Steps\n1. Add console.logs in Pipeline.ts to verify skeleton events emit (line 72-75)\n2. Check if formProcessor.processFrame receives skeletons (line 84-86)\n3. Check if repProcessor.updateRepCount receives checkpoints (line 97-100)\n4. Verify setRepCount callback is being called (useSwingAnalyzer.tsx line 150)\n\n## Hypothesis\nThe issue might be:\n- Form processor not detecting positions from cached skeletons\n- Pipeline subscriptions not set up correctly after reinitialize\n- Skeleton events emitting but form processor filtering them out","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-03T03:26:11.354411332Z","updated_at":"2025-12-03T03:33:28.685659925Z","closed_at":"2025-12-03T03:33:28.685659925Z","close_reason":"Fixed by adding tolerance to LivePoseCache.getFrame() - during streaming mode, only use frames within 100ms of requested time. This prevents stale poses from being reused, allowing proper cycle detection and rep counting."}
