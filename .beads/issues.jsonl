{"id":"swing-0dw","title":"Split useSwingAnalyzer.tsx (1087 lines)","description":"Massive hook mixing extraction logic, pipeline setup, UI state, error handling. Extract to: PoseExtractorHook.ts, usePipeline.ts, keep only UI state.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-04T03:03:40.577187893Z","updated_at":"2025-12-04T03:03:40.577187893Z"}
{"id":"swing-0ta","title":"Phase 1: Create ExerciseDefinition types and interfaces","description":"Create src/types/exercise.ts with:\n- ExerciseDefinition interface\n- PositionDefinition interface\n- KeyAngleDefinition interface\n- AngleTarget, ScoringWeight interfaces\n- PhaseDetectionConfig interface\n- RepCriteria interface","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-04T03:03:15.674598546Z","updated_at":"2025-12-04T03:38:33.038042158Z","closed_at":"2025-12-04T03:38:33.038042158Z","dependencies":[{"issue_id":"swing-0ta","depends_on_id":"swing-7zt","type":"parent-child","created_at":"2025-12-04T03:03:50.421951183Z","created_by":"daemon"}]}
{"id":"swing-1ji","title":"Create model configuration","description":"Create src/config/modelConfig.ts with model options. Enable runtime model selection.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T02:11:35.965194113Z","updated_at":"2025-12-03T03:56:08.999386724Z","closed_at":"2025-12-03T03:56:08.999386724Z"}
{"id":"swing-1r2","title":"Simplify pipeline architecture","description":"Remove RxJS complexity from pipeline. Keep SwingAnalyzer (pure logic), remove wrapper layers.\n\n## Current Architecture (Complex)\n\n```\n┌─────────────────────────────────────────────────────────────────────────────┐\n│                         CURRENT PIPELINE (RxJS)                              │\n└─────────────────────────────────────────────────────────────────────────────┘\n\nVideoFrameAcquisition          PoseSkeletonTransformer\n       │                               │\n       ▼                               ▼\n  Observable\u003cFrame\u003e  ──switchMap──▶  Observable\u003cSkeleton\u003e\n                                           │\n                    ┌──────────────────────┘\n                    ▼\n            SwingFormProcessor (RxJS wrapper)\n                    │\n                    ▼\n             Observable\u003cFormEvent\u003e\n                    │\n                    ▼\n            SwingRepProcessor (RxJS wrapper)\n                    │\n                    ▼\n              Observable\u003cRepEvent\u003e\n                    │\n                    ▼\n               Pipeline.ts (Subject orchestration)\n                    │\n                    ▼\n              useSwingAnalyzer hook (subscribes)\n\nFiles involved:\n- Pipeline.ts (264 lines) - RxJS orchestration\n- PipelineInterfaces.ts - Observable interfaces\n- SwingFormProcessor.ts (24KB!) - RxJS wrapper + some logic\n- SwingRepProcessor.ts (7.7KB) - RxJS wrapper\n- VideoFrameAcquisition.ts (8.7KB) - frame events\n```\n\n## Target Architecture (Simple)\n\n```\n┌─────────────────────────────────────────────────────────────────────────────┐\n│                         TARGET PIPELINE (Callbacks)                          │\n└─────────────────────────────────────────────────────────────────────────────┘\n\nvideo.onTimeUpdate / requestAnimationFrame\n           │\n           ▼\n    PoseDetector.detect(frame)\n           │\n           ▼\n       Skeleton\n           │\n           ▼\n    SwingAnalyzer.processFrame(skeleton)  ◀── KEEP THIS (pure logic, 11KB)\n           │\n           ▼\n    { position, checkpoint, repCount }\n           │\n           ▼\n    Component state updates (setRepCount, etc.)\n```\n\n## What to Keep\n- SwingAnalyzer.ts - pure logic, well tested, no RxJS\n- Skeleton.ts - pure data class\n- PoseDetector - ML model wrapper\n\n## What to Remove/Simplify\n- Pipeline.ts → simple function or class with processFrame()\n- SwingFormProcessor.ts → inline into SwingAnalyzer or delete\n- SwingRepProcessor.ts → inline into SwingAnalyzer or delete  \n- PipelineInterfaces.ts → simplify to plain types\n- Remove Subject/Observable usage in hooks\n\n## Migration Steps\n1. Add simple processFrame() path alongside RxJS\n2. Update useSwingAnalyzer to use simple path\n3. Verify E2E tests pass\n4. Remove RxJS code paths\n5. Delete unused files\n\n## Success Criteria\n- All E2E tests pass\n- Rep counting works identically\n- Checkpoints captured correctly\n- Less code, easier to understand\n- Ready to add PullUpAnalyzer","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-04T04:24:54.952122109Z","updated_at":"2025-12-04T04:24:54.952122109Z"}
{"id":"swing-21o","title":"Create ExerciseDefinition interface","description":"Interface with name, positions, idealAngles (Map\u003cstring, AngleConfig\u003e), and repCriteria.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T03:57:01.789648693Z","updated_at":"2025-12-03T03:57:01.789648693Z"}
{"id":"swing-22","title":"Merge PR #44: BlazePose model abstraction","description":"PR ready with error handling, KeypointAdapter, PoseDetectorFactory. Rebased on main.","notes":"PR #44 updated: Fixed directSkeletonTransformerRef model preference bug, added CLAUDE.md docs, 157 unit tests + 41 E2E tests pass. PR #40 closed as superseded.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-03T13:34:35.277968705Z","updated_at":"2025-12-03T15:29:28.085953033Z","closed_at":"2025-12-03T15:29:28.085953033Z","dependencies":[{"issue_id":"swing-22","depends_on_id":"swing-97v","type":"blocks","created_at":"2025-12-03T13:44:05.926052968Z","created_by":"daemon"}]}
{"id":"swing-23","title":"Merge PR #45: Batch analysis with filmstrip","description":"PR ready with abort mechanism, timeout handling. Filmstrip tests skipped pending mock detector. Rebased on main.","notes":"PR #45 updated: Fixed memory leak and race condition in useFilmstripCapture, added 31 LivePoseCache tests, merged dev branch. 188 unit + 41 E2E tests pass. Ready for merge.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-03T13:34:36.071162853Z","updated_at":"2025-12-04T02:27:26.515358841Z","closed_at":"2025-12-04T01:21:11.213190959Z"}
{"id":"swing-24","title":"Merge PR #46: Mock pose detector for E2E","description":"PR ready with real pose fixture, hash fix, code review fixes. Enables skipped filmstrip tests. Rebased on main.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-03T13:34:36.862025762Z","updated_at":"2025-12-04T02:27:27.123732443Z","closed_at":"2025-12-04T01:21:11.244045489Z","dependencies":[{"issue_id":"swing-24","depends_on_id":"swing-23","type":"blocks","created_at":"2025-12-03T13:38:35.057865479Z","created_by":"daemon"}]}
{"id":"swing-25","title":"Close PR #40: Superseded by PR #44","description":"Close after swing-97v merges PR #40 changes into PR #44","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-03T13:34:37.96073671Z","updated_at":"2025-12-03T14:02:04.010240003Z","closed_at":"2025-12-03T14:02:04.010240003Z","dependencies":[{"issue_id":"swing-25","depends_on_id":"swing-22","type":"blocks","created_at":"2025-12-03T13:35:37.873121955Z","created_by":"import"}]}
{"id":"swing-2v2","title":"Fix video playback tests in headless Playwright","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T03:26:39.970351835Z","updated_at":"2025-12-03T03:47:26.608911278Z","closed_at":"2025-12-03T03:47:26.608911278Z","close_reason":"Research complete. Issue is NOT codec-related. Real blocker is app bug swing-o6o (play button not working). Tests updated with accurate skip reasons.","comments":[{"id":1,"issue_id":"swing-2v2","author":"developer","text":"## Problem\n6 tests in user-journey.spec.ts are skipped because video playback doesnt work in headless Chromium.\n\n## Root Cause  \nHeadless Chromium lacks proprietary codec support (H.264/AAC) due to licensing.\n\n## Solution\nUse branded Chrome: channel: chrome in playwright.config.ts\n\n## Sources\n- https://github.com/microsoft/playwright/issues/37979\n- https://playwright.dev/docs/browsers","created_at":"2025-12-03T17:31:06Z"},{"id":2,"issue_id":"swing-2v2","author":"developer","text":"## Research Conclusion\n\nAfter researching all three alternatives:\n\n1. **FFmpeg** - NOT a solution (only for test recording, not playback)\n2. **Firefox/WebKit** - NOT recommended (unreliable headless codec support)\n3. **channel: chrome** - RECOMMENDED (full codec support, simple change)\n\n## Implementation\nAdd channel: chrome to playwright.config.ts and run npx playwright install chrome in CI.\n\n## Trade-offs\n- 200MB download vs 150MB\n- 10-15% slower than headless shell\n- Full codec support for video playback","created_at":"2025-12-03T17:31:06Z"},{"id":3,"issue_id":"swing-2v2","author":"developer","text":"## Update: WebM/VP9 works in headless Chromium!\n\nTested video playback in this container (Linux ARM64):\n- Chrome branded: NOT available on ARM64\n- WebM/VP9 in headless Chromium: WORKS\n\nThe tests were skipped when video was MP4/H.264. Since switching to WebM, playback works. The test.skip() annotations may be outdated.\n\nNext step: Remove test.skip() from video playback tests and verify they pass.","created_at":"2025-12-03T17:31:06Z"},{"id":4,"issue_id":"swing-2v2","author":"developer","text":"## Final Status\n\nResearch complete. Key findings:\n\n1. **WebM/VP9 IS supported** in headless Chromium - codec is NOT the issue\n2. **Chrome branded not available** on Linux ARM64 (this container)\n3. **Real issue identified**: App bug where play button click doesn't start playback (linked to swing-o6o)\n\nTests updated with accurate skip reasons referencing swing-o6o. 14 tests pass, 4 skipped due to app bug.","created_at":"2025-12-03T17:31:06Z"}]}
{"id":"swing-3vi","title":"Add unit tests for SwingRepProcessor rep counting","description":"Test rep completion sequence (Release → Top). Test partial cycles. Test reset behavior.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T02:10:41.924860514Z","updated_at":"2025-12-03T03:09:48.948005756Z","closed_at":"2025-12-03T03:09:48.948005756Z"}
{"id":"swing-5g0","title":"Phase 3: Add Exercise Selector UI component","description":"Create exercise selector component:\n- Dropdown/toggle on main screen\n- Persist selection to localStorage\n- Update pipeline on exercise change\n- Show camera angle recommendation","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-04T03:03:15.998531032Z","updated_at":"2025-12-04T03:03:15.998531032Z","dependencies":[{"issue_id":"swing-5g0","depends_on_id":"swing-hhs","type":"blocks","created_at":"2025-12-04T03:03:33.894627351Z","created_by":"daemon"},{"issue_id":"swing-5g0","depends_on_id":"swing-7zt","type":"parent-child","created_at":"2025-12-04T03:03:50.618917783Z","created_by":"daemon"}]}
{"id":"swing-6i1","title":"Update UI to select exercise type","description":"Add exercise selection to the UI","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-03T03:57:01.790520693Z","updated_at":"2025-12-03T03:57:01.790520693Z"}
{"id":"swing-6zp","title":"Extract SwingAnalyzer from SwingFormProcessor","description":"Move position detection logic (detectPosition), ideal angles and thresholds, cycle tracking state. Make it a pure class with no RxJS/video dependencies.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T02:11:08.553818516Z","updated_at":"2025-12-03T03:33:07.04709368Z","closed_at":"2025-12-03T03:33:07.04709368Z"}
{"id":"swing-7b0","title":"Create VideoSkeletonSource","description":"Wrap VideoFrameAcquisition + PoseSkeletonTransformer. Emit Observable\u003cSkeletonEvent\u003e.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T03:57:01.791052025Z","updated_at":"2025-12-03T03:57:01.791052025Z"}
{"id":"swing-7by","title":"Deep architecture review: identify improvements and tech debt","description":"Review the entire codebase to identify:\n1. Architectural improvements needed\n2. Tech debt to address\n3. Dead code to remove\n4. Incomplete features to finish or remove\n5. Test coverage gaps\n6. Performance bottlenecks\n\nFocus areas:\n- Pipeline architecture (SwingAnalyzer integration)\n- Model abstraction (BlazePose complete?)\n- E2E test reliability\n- Code duplication\n- Unused branches/features","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-04T02:48:03.044521235Z","updated_at":"2025-12-04T03:03:51.213290575Z","closed_at":"2025-12-04T03:03:49.939496229Z"}
{"id":"swing-7ii","title":"Phase 3: Unified Pipeline Refactor","description":"Extract shared analysis logic so both real-time and batch modes use the same code","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-03T03:57:01.791549692Z","updated_at":"2025-12-03T03:57:01.791549692Z"}
{"id":"swing-7s4","title":"Create analyzer factory","description":"Function createAnalyzer(exercise: ExerciseType): ExerciseAnalyzer","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T03:57:01.792018775Z","updated_at":"2025-12-03T03:57:01.792018775Z"}
{"id":"swing-7zf","title":"Add unit tests for SwingFormProcessor position detection","description":"Test each position (Top, Connect, Bottom, Release) with known skeleton data. Test threshold boundaries. Test cycle detection logic.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T02:10:41.084892567Z","updated_at":"2025-12-03T03:09:47.254773529Z","closed_at":"2025-12-03T03:09:47.254773529Z"}
{"id":"swing-7zt","title":"FormAnalyzer: Multi-exercise support","description":"Transform SwingAnalyzer into a generic FormAnalyzer supporting multiple exercises (kettlebell swings, pull-ups, pistol squats) through a pluggable exercise definition architecture. See docs/FORM_ANALYZER_PROPOSAL.md for full design.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-04T03:02:46.490078678Z","updated_at":"2025-12-04T03:02:46.490078678Z"}
{"id":"swing-8rg","title":"Phase 1: Create exercise definition configs","description":"Create src/exercises/ with:\n- kettlebellSwing.ts - port existing swing logic to config\n- pullUp.ts - new definition\n- pistolSquat.ts - new definition\n- index.ts - registry/factory for exercises","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-04T03:03:15.718138586Z","updated_at":"2025-12-04T03:47:36.715917878Z","closed_at":"2025-12-04T03:47:36.715917878Z","dependencies":[{"issue_id":"swing-8rg","depends_on_id":"swing-0ta","type":"blocks","created_at":"2025-12-04T03:03:33.683902377Z","created_by":"daemon"},{"issue_id":"swing-8rg","depends_on_id":"swing-7zt","type":"parent-child","created_at":"2025-12-04T03:03:50.452626Z","created_by":"daemon"}]}
{"id":"swing-94t","title":"Phase 4: E2E tests for exercise selection","description":"Add E2E tests:\n- Exercise selection flow\n- Verify filmstrip updates per exercise\n- Rep counting for each exercise type","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-04T03:03:16.14280397Z","updated_at":"2025-12-04T03:03:16.14280397Z","dependencies":[{"issue_id":"swing-94t","depends_on_id":"swing-5g0","type":"blocks","created_at":"2025-12-04T03:03:34.043079933Z","created_by":"daemon"},{"issue_id":"swing-94t","depends_on_id":"swing-7zt","type":"parent-child","created_at":"2025-12-04T03:03:50.793490933Z","created_by":"daemon"}]}
{"id":"swing-97v","title":"Merge PR #40 unique changes into PR #44","description":"PR #40 has unique changes not in #44:\n- e2e-tests/helpers/video.ts: Status text + auto-play fix\n- CLAUDE.md, PLAN.md: Doc updates\n\nSteps:\n1. Cherry-pick/copy unique files from PR #40 into PR #44 branch\n2. Test to ensure everything works\n3. Push updated PR #44\n4. Close PR #40 as superseded","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-03T13:43:58.051546703Z","updated_at":"2025-12-03T14:01:54.786339026Z","closed_at":"2025-12-03T14:01:54.786339026Z"}
{"id":"swing-9cn","title":"Create KeypointAdapter for MediaPipe to COCO conversion","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T03:54:11.10875198Z","updated_at":"2025-12-03T03:56:10.23033316Z","closed_at":"2025-12-03T03:56:10.23033316Z","close_reason":"Created src/pipeline/KeypointAdapter.ts with MediaPipe-to-COCO conversion","dependencies":[{"issue_id":"swing-9cn","depends_on_id":"swing-joq","type":"blocks","created_at":"2025-12-03T03:54:17.737742047Z","created_by":"daemon"}]}
{"id":"swing-9dt","title":"Update useSwingAnalyzer hook to use simple path","description":"Replace Observable subscriptions with direct processFrame() calls. Video events trigger processing.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-04T04:25:05.407645681Z","updated_at":"2025-12-04T04:25:05.407645681Z","dependencies":[{"issue_id":"swing-9dt","depends_on_id":"swing-1r2","type":"parent-child","created_at":"2025-12-04T04:25:15.25333512Z","created_by":"daemon"},{"issue_id":"swing-9dt","depends_on_id":"swing-bz1","type":"blocks","created_at":"2025-12-04T04:25:15.277256975Z","created_by":"daemon"}]}
{"id":"swing-a07","title":"External video requires playing twice before pose detection starts","description":"When loading an external video (not from storage), user has to play the video twice before pose detection kicks in. Investigate different handling paths for external vs loaded videos.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-03T04:19:11.534455831Z","updated_at":"2025-12-03T04:36:34.42028993Z","closed_at":"2025-12-03T04:36:34.42028993Z"}
{"id":"swing-ad3","title":"Add unit tests for Pipeline.processSkeletonEvent","description":"Critical batch processing method with no coverage. Test single frame, sequences, rep counting accuracy, error handling.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-04T03:03:44.059500513Z","updated_at":"2025-12-04T03:03:44.059500513Z"}
{"id":"swing-ama","title":"Create PoseDetectorFactory","description":"Instantiate correct model based on config. Handle different keypoint formats (COCO-17 vs MediaPipe-33).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T02:11:36.824556318Z","updated_at":"2025-12-03T03:56:11.540932397Z","closed_at":"2025-12-03T03:56:11.540932397Z"}
{"id":"swing-arz","title":"Use z-coordinate to correct angle measurements for off-axis camera","description":"Currently all angle calculations in Skeleton.ts are purely 2D (x,y only). The z-depth from BlazePose is preserved but unused.\n\nUse case: When user isn't perfectly sideways to camera, 2D angles are skewed.\n\nImplementation:\n1. Detect body orientation from z-depth (e.g., left_shoulder.z vs right_shoulder.z)\n2. Calculate rotation angle: atan2(shoulder_z_diff, shoulder_x_diff)\n3. Apply correction factor to 2D measurements: scale by 1/cos(rotation)\n\nThis would improve accuracy for users who can't get perfect side-on camera positioning.\n\nDepends on BlazePose integration (swing-joq).","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-03T05:35:50.99657138Z","updated_at":"2025-12-03T05:35:50.99657138Z"}
{"id":"swing-b10","title":"Fix filmstrip thumbnails during extraction (frameImage pass-through)","description":"Filmstrip thumbnails show frame 0 instead of actual swing positions during extraction.\n\nRoot cause: SwingFormProcessor.captureCurrentFrame() reads from main video element which is paused at frame 0 during extraction.\n\nFix: Pass frameImage (ImageData) from PoseExtractor through the pipeline so thumbnails capture the correct frame.","design":"1. Add frameImage?: ImageData to PoseTrackFrame (runtime-only, not serialized)\n2. Add frameImage?: ImageData to FrameEvent interface\n3. Capture ImageData in PoseExtractor after drawing frame to canvas\n4. Pass through buildSkeletonEventFromFrame()\n5. Use in SwingFormProcessor.captureCurrentFrame() if available\n6. Create shared skeleton drawing utility for thumbnail overlay","acceptance_criteria":"- Extraction shows correct thumbnails at each swing position\n- Thumbnails include skeleton overlay\n- Memory: frameImage cleared after thumbnail creation\n- PoseTrack JSON does not include frameImage (stripped on serialize)","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-03T23:02:52.589888769Z","updated_at":"2025-12-03T23:16:27.730573715Z","closed_at":"2025-12-03T23:16:27.730573715Z","dependencies":[{"issue_id":"swing-b10","depends_on_id":"swing-d0d","type":"blocks","created_at":"2025-12-03T23:02:57.207269393Z","created_by":"daemon"}]}
{"id":"swing-b69","title":"Test sync from swing-6 dir","description":"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-04T03:12:50.096652988Z","updated_at":"2025-12-04T03:28:33.37494324Z","closed_at":"2025-12-04T03:28:33.37494324Z"}
{"id":"swing-bf3","title":"Create exercise-specific analyzers","description":"SwingAnalyzer (existing, refactored), PullUpAnalyzer, PistolSquatAnalyzer","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T03:57:01.792573816Z","updated_at":"2025-12-03T03:57:01.792573816Z"}
{"id":"swing-bpn","title":"Delete SwingFormProcessor.ts","description":"Move any remaining logic to SwingAnalyzer, delete the RxJS wrapper.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-04T04:25:05.422804808Z","updated_at":"2025-12-04T04:25:05.422804808Z","dependencies":[{"issue_id":"swing-bpn","depends_on_id":"swing-1r2","type":"parent-child","created_at":"2025-12-04T04:25:15.266190003Z","created_by":"daemon"},{"issue_id":"swing-bpn","depends_on_id":"swing-ibg","type":"blocks","created_at":"2025-12-04T04:25:15.290325233Z","created_by":"daemon"}]}
{"id":"swing-bz1","title":"Add simple processFrame() to SwingAnalyzer","description":"Add method that returns { position, checkpoint, repCount } without RxJS. Keep existing RxJS path working.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-04T04:25:05.399218577Z","updated_at":"2025-12-04T04:25:05.399218577Z","dependencies":[{"issue_id":"swing-bz1","depends_on_id":"swing-1r2","type":"parent-child","created_at":"2025-12-04T04:25:15.245182558Z","created_by":"daemon"}]}
{"id":"swing-cy9","title":"Fix skeleton not redrawing on video seek while paused","description":"VideoFrameAcquisition only emits frames during playback. Need to also emit on 'seeked' event when paused. Fix in src/pipeline/VideoFrameAcquisition.ts. Test exists: e2e-tests/user-journey.spec.ts 'skeleton redraws when video is seeked manually'","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-03T03:49:39.144632874Z","updated_at":"2025-12-03T04:01:05.744661391Z","closed_at":"2025-12-03T04:01:05.744661391Z","close_reason":"Fix implemented: VideoFrameAcquisition now emits frame on seeked event. E2E test added but may need cache lookup fix to pass."}
{"id":"swing-d0d","title":"Create shared skeleton drawing utility","description":"Extract skeleton rendering logic to a shared utility that can be used by both SkeletonRenderer and SwingFormProcessor (for thumbnail overlays).","design":"Create src/utils/skeletonDrawing.ts with:\n- drawSkeletonToContext(ctx, skeleton, options)\n- SkeletonDrawOptions interface (keypointRadius, lineWidth, colors)\n- Refactor SkeletonRenderer to use this utility","acceptance_criteria":"- New utility file created\n- SkeletonRenderer refactored to use it\n- SwingFormProcessor can draw skeleton on thumbnails\n- No code duplication for skeleton rendering","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T23:02:52.706885522Z","updated_at":"2025-12-03T23:16:27.662072259Z","closed_at":"2025-12-03T23:16:27.662072259Z"}
{"id":"swing-d0l","title":"Update PoseTrackPipeline to use SwingAnalyzer","description":"Delete duplicated position detection logic (lines 354-419). Use shared SwingAnalyzer instance.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T03:57:01.793036482Z","updated_at":"2025-12-03T03:57:01.793036482Z"}
{"id":"swing-dds","title":"Verify both paths produce identical results","description":"Add integration test comparing real-time vs batch analysis.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T03:57:01.793858815Z","updated_at":"2025-12-03T03:57:01.793858815Z"}
{"id":"swing-dy2","title":"Create keypoint adapter","description":"Map MediaPipe keypoints to COCO format (or vice versa). Ensure Skeleton class works with both.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T03:57:01.794556397Z","updated_at":"2025-12-04T02:27:27.157908204Z","closed_at":"2025-12-04T01:21:25.306904767Z"}
{"id":"swing-dy6","title":"Add elapsed time to extraction progress bar","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T03:26:10.483260322Z","updated_at":"2025-12-03T03:27:13.336453151Z","closed_at":"2025-12-03T03:27:13.336453151Z","close_reason":"Added elapsedTime and fps to progress, updated status bar to show: percentage, frames, elapsed time, and fps"}
{"id":"swing-emq","title":"Phase 3: Update filmstrip for dynamic positions","description":"Update filmstrip component:\n- Display position names from exercise config\n- Show angle info for current exercise\n- Handle different number of positions per exercise","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-04T03:03:16.045203501Z","updated_at":"2025-12-04T03:03:16.045203501Z","dependencies":[{"issue_id":"swing-emq","depends_on_id":"swing-hhs","type":"blocks","created_at":"2025-12-04T03:03:33.938027115Z","created_by":"daemon"},{"issue_id":"swing-emq","depends_on_id":"swing-7zt","type":"parent-child","created_at":"2025-12-04T03:03:50.693696079Z","created_by":"daemon"}]}
{"id":"swing-en3","title":"Redraw skeleton on manual video seek","description":"## Problem\nWhen user seeks/scrubs to a different position in the video while paused, the skeleton overlay does not redraw for that frame. The canvas remains blank until playback resumes.\n\n## E2E Test Added\n- `e2e-tests/user-journey.spec.ts` - \"Skeleton Redraw on Seek\" test section\n- Test confirms bug: `skeleton redraws when video is seeked manually` FAILS\n- Canvas has no content after seek while paused\n\n## Root Cause (to investigate)\nThe `VideoFrameAcquisition` only emits frames when video is playing:\n```javascript\nthis.videoElement.paused ? NEVER : interval(frameInterval)...\n```\n\nNeed to also emit a frame on the 'seeked' event when paused.\n\n## Files to Fix\n- `src/pipeline/VideoFrameAcquisition.ts` - add seeked event handler\n- Possibly `src/hooks/useSwingAnalyzer.tsx` - ensure skeleton renders on seek","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-03T03:46:54.766114968Z","updated_at":"2025-12-03T03:49:31.845251565Z","closed_at":"2025-12-03T03:49:31.845251565Z","close_reason":"E2E test added that confirms the bug. Test fails as expected - skeleton doesn't redraw on seek while paused. Bug fix is separate work."}
{"id":"swing-ez6","title":"Phase 4: Unit tests for FormAnalyzer and RepCounter","description":"Add unit tests:\n- FormAnalyzer with each exercise config\n- RepCounter sequence validation\n- Angle calculations for new methods\n- Exercise config validation","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-04T03:03:16.094795728Z","updated_at":"2025-12-04T03:03:16.094795728Z","dependencies":[{"issue_id":"swing-ez6","depends_on_id":"swing-n99","type":"blocks","created_at":"2025-12-04T03:03:33.992165976Z","created_by":"daemon"},{"issue_id":"swing-ez6","depends_on_id":"swing-7zt","type":"parent-child","created_at":"2025-12-04T03:03:50.745838755Z","created_by":"daemon"}]}
{"id":"swing-f3p","title":"Update SwingFormProcessor to use SwingAnalyzer","description":"Becomes a thin wrapper that subscribes to skeleton source. Delegates to SwingAnalyzer for analysis.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T03:57:01.79496948Z","updated_at":"2025-12-03T03:57:01.79496948Z"}
{"id":"swing-ffw","title":"Fix Tailscale banner showing wrong port","description":"The Tailscale banner in vite.config.ts prints the default port (5173) before Vite checks port availability. When Vite falls back to another port (e.g., 5174), the banner shows the wrong URL. Should detect the actual port Vite uses.","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-12-03T05:11:03.381652145Z","updated_at":"2025-12-03T05:16:45.590865071Z","closed_at":"2025-12-03T05:16:45.590865071Z"}
{"id":"swing-hhs","title":"Phase 2: Update Pipeline/PipelineFactory for exercise selection","description":"Update src/pipeline/PipelineFactory.ts:\n- Accept exercise type parameter\n- Instantiate correct analyzer based on exercise\n- Pass ExerciseDefinition to FormAnalyzer","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-04T03:03:15.944321558Z","updated_at":"2025-12-04T03:03:15.944321558Z","dependencies":[{"issue_id":"swing-hhs","depends_on_id":"swing-n99","type":"blocks","created_at":"2025-12-04T03:03:33.810383511Z","created_by":"daemon"},{"issue_id":"swing-hhs","depends_on_id":"swing-nww","type":"blocks","created_at":"2025-12-04T03:03:33.853633483Z","created_by":"daemon"},{"issue_id":"swing-hhs","depends_on_id":"swing-7zt","type":"parent-child","created_at":"2025-12-04T03:03:50.57503014Z","created_by":"daemon"}]}
{"id":"swing-hjq","title":"Update PoseSkeletonTransformer for model abstraction","description":"Accept model type in constructor. Use factory to create detector.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T03:57:01.795400771Z","updated_at":"2025-12-03T03:58:02.329900604Z","closed_at":"2025-12-03T03:58:02.329900604Z","close_reason":"Updated PoseSkeletonTransformer to use ModelConfig, PoseDetectorFactory, and KeypointAdapter"}
{"id":"swing-hub","title":"Fix duplicate rep counting on playback (playback-only mode)","description":"Playing video after extraction counts reps again, doubling the count.\n\nRoot cause: Playback pipeline still runs SwingFormProcessor and SwingRepProcessor, re-detecting positions and re-counting reps.\n\nFix: Add playback-only mode that skips form/rep processing entirely.","design":"Option B (simpler): Add playbackOnly flag to Pipeline constructor.\n\n1. Add playbackOnly: boolean parameter to Pipeline\n2. When true, start() skips form/rep processing stages\n3. Only emits skeleton events for rendering\n4. PipelineFactory auto-sets playbackOnly=true when using cached poses","acceptance_criteria":"- Load video, wait for extraction (e.g., 3 reps detected)\n- Play video to end\n- Rep count stays at 3 (not 6)\n- Skeleton still renders during playback\n- Angle displays still update during playback","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-03T23:02:52.660232499Z","updated_at":"2025-12-03T23:16:27.770654717Z","closed_at":"2025-12-03T23:16:27.770654717Z"}
{"id":"swing-i62","title":"Disable play button until video is loaded","description":"Play button should be disabled until a video is loaded. Currently it may be clickable before video is ready, which could cause errors or undefined behavior.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-03T04:09:44.93500552Z","updated_at":"2025-12-03T15:07:30.641689436Z","closed_at":"2025-12-03T04:11:44.97742463Z"}
{"id":"swing-ibg","title":"Remove RxJS from Pipeline.ts","description":"Simplify Pipeline to orchestrate without Subjects/Observables. Keep interface compatible.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-04T04:25:05.415393744Z","updated_at":"2025-12-04T04:25:05.415393744Z","dependencies":[{"issue_id":"swing-ibg","depends_on_id":"swing-1r2","type":"parent-child","created_at":"2025-12-04T04:25:15.259709854Z","created_by":"daemon"},{"issue_id":"swing-ibg","depends_on_id":"swing-9dt","type":"blocks","created_at":"2025-12-04T04:25:15.283336042Z","created_by":"daemon"}]}
{"id":"swing-iqa","title":"Optimize E2E test performance","description":"Tests take 2+ minutes. Optimizations: 1) Remove 10ms frame delay (saves ~8s/test), 2) Use smaller fixtures (2 reps vs 8), 3) Move IndexedDB seeding to beforeAll. Branch: feature/e2e-test-optimizations","notes":"Completed: Changed frame delay default from 10ms to 0ms. With 796 frames, this saves ~8s per test that uses mock extraction. Tests pass in isolation; parallel flakiness is tracked separately in swing-mt5.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-04T01:23:08.755909056Z","updated_at":"2025-12-04T02:15:39.466756779Z","closed_at":"2025-12-04T01:53:23.539308003Z"}
{"id":"swing-j89","title":"Centralize magic numbers into SwingThresholds config","description":"Hardcoded thresholds scattered across SwingFormProcessor, SwingAnalyzer, PoseTrackPipeline with different values. Create unified config.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-04T03:03:42.549201753Z","updated_at":"2025-12-04T03:03:42.549201753Z"}
{"id":"swing-j9y","title":"Batch rep counting from cached/extracted poses","description":"Currently reps only count during real-time video playback. Add batch mode rep counting:\n\n1. Pre-compute during extraction: As poses are extracted, run rep processor so results are ready when extraction finishes\n2. Instant analysis on load: When cached poses load, immediately analyze all frames and show final rep count\n\nThis enables instant feedback without waiting for video to play through.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-03T04:46:57.158396096Z","updated_at":"2025-12-03T04:52:59.54158939Z","closed_at":"2025-12-03T04:52:59.54158939Z"}
{"id":"swing-joq","title":"Phase 4: Model Abstraction (BlazePose Support)","description":"Support multiple pose detection models (MoveNet, BlazePose)","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-03T03:57:01.795884188Z","updated_at":"2025-12-04T03:23:40.369675513Z","closed_at":"2025-12-04T02:35:19.054028543Z"}
{"id":"swing-jtl","title":"Add unit tests for CachedPoseSkeletonTransformer","description":"No tests for streaming vs static modes, frame lookup with tolerance, extraction completion detection, spine angle fallback logic.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-04T03:03:43.240468997Z","updated_at":"2025-12-04T03:03:43.240468997Z"}
{"id":"swing-mkx","title":"Remove dead code: completedReps, repIncremented, getAllReps()","description":"SwingRepProcessor maintains completedReps array but never reads it. getAllReps() never called. repIncremented field in RepEvent set but never read.","status":"open","priority":2,"issue_type":"chore","created_at":"2025-12-04T03:03:41.726045576Z","updated_at":"2025-12-04T03:03:41.726045576Z"}
{"id":"swing-mnc","title":"Phase 1: Add elbow and generic angle methods to Skeleton","description":"Add to src/models/Skeleton.ts:\n- getElbowAngle() - for pull-ups\n- getGenericAngle(a, b, c) - configurable 3-point angle calculation","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-04T03:03:15.765041851Z","updated_at":"2025-12-04T03:28:03.49214078Z","closed_at":"2025-12-04T03:28:03.49214078Z","dependencies":[{"issue_id":"swing-mnc","depends_on_id":"swing-7zt","type":"parent-child","created_at":"2025-12-04T03:03:50.480785252Z","created_by":"daemon"}]}
{"id":"swing-mt5","title":"Fix 7 failing E2E tests","description":"4 instant-filmstrip failures (rep counting), 1 swing-analyzer failure (hardcoded video load), 2 user-journey failures (video source blob: vs swing-sample.webm). These existed before our changes.","notes":"Fixed: \n1. Missing `scripts/generate-version.sh` causing 35 test failures (app wouldn't load)\n2. Video src tests expecting `swing-sample.webm` but app uses `blob:` URLs (3 tests)\n3. Parallel test flakiness - reduced workers from 10 to 4, added `test.describe.serial` to filmstrip tests\n\nAll 64 tests now pass (6 skipped).","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-04T01:23:09.436024881Z","updated_at":"2025-12-04T03:01:48.076723405Z","closed_at":"2025-12-04T03:01:48.076723405Z"}
{"id":"swing-n99","title":"Phase 2: Create generic FormAnalyzer","description":"Create src/pipeline/FormAnalyzer.ts:\n- Generic version of SwingAnalyzer\n- Constructor accepts ExerciseDefinition\n- Position detection uses config\n- Phase detection uses config\n- Scoring based on config weights","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-04T03:03:15.849372884Z","updated_at":"2025-12-04T03:03:15.849372884Z","dependencies":[{"issue_id":"swing-n99","depends_on_id":"swing-0ta","type":"blocks","created_at":"2025-12-04T03:03:33.718167559Z","created_by":"daemon"},{"issue_id":"swing-n99","depends_on_id":"swing-8rg","type":"blocks","created_at":"2025-12-04T03:03:33.748630291Z","created_by":"daemon"},{"issue_id":"swing-n99","depends_on_id":"swing-7zt","type":"parent-child","created_at":"2025-12-04T03:03:50.511983282Z","created_by":"daemon"}]}
{"id":"swing-nww","title":"Phase 2: Create generic RepCounter","description":"Create src/pipeline/RepCounter.ts:\n- Generic version of SwingRepProcessor\n- Constructor accepts RepCriteria\n- Sequence validation from config\n- Support different rep definitions per exercise","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-04T03:03:15.898318517Z","updated_at":"2025-12-04T03:03:15.898318517Z","dependencies":[{"issue_id":"swing-nww","depends_on_id":"swing-0ta","type":"blocks","created_at":"2025-12-04T03:03:33.778705644Z","created_by":"daemon"},{"issue_id":"swing-nww","depends_on_id":"swing-7zt","type":"parent-child","created_at":"2025-12-04T03:03:50.540134326Z","created_by":"daemon"}]}
{"id":"swing-o6o","title":"Debug rep counter not updating with cached poses during playback","description":"## Problem\nRep counter doesn't update when video plays with CachedPoseSkeletonTransformer (streaming mode), even though skeleton overlay renders correctly.\n\n## Context\nWhen extraction starts, VideoSection.tsx calls reinitializeWithLiveCache() which creates a new pipeline using CachedPoseSkeletonTransformer instead of the ML-based PoseSkeletonTransformer. The skeleton overlay works (proving cached poses are being read), but rep count stays at 0.\n\n## Key Files to Investigate\n- `src/hooks/useSwingAnalyzer.tsx` lines 145-170 - pipeline subscription setup, setRepCount callback\n- `src/pipeline/Pipeline.ts` - full pipeline flow: skeleton → form → rep\n- `src/pipeline/CachedPoseSkeletonTransformer.ts` - transforms frames to skeletons using cached data\n- `src/pipeline/SwingFormProcessor.ts` - detects swing positions (Top, Connect, Bottom, Release)\n- `src/pipeline/SwingRepProcessor.ts` - counts reps based on position sequence\n- `src/components/VideoSection.tsx` lines 52-60 - reinitializeWithLiveCache trigger\n\n## Pipeline Flow\n1. VideoFrameAcquisition emits FrameEvent (on video play/pause)\n2. CachedPoseSkeletonTransformer looks up cached pose → emits SkeletonEvent\n3. SwingFormProcessor detects position → emits FormEvent/checkpoint\n4. SwingRepProcessor counts reps → emits RepEvent\n5. Pipeline.resultSubject pushes to useSwingAnalyzer which calls setRepCount\n\n## Debug Steps\n1. Add console.logs in Pipeline.ts to verify skeleton events emit (line 72-75)\n2. Check if formProcessor.processFrame receives skeletons (line 84-86)\n3. Check if repProcessor.updateRepCount receives checkpoints (line 97-100)\n4. Verify setRepCount callback is being called (useSwingAnalyzer.tsx line 150)\n\n## Hypothesis\nThe issue might be:\n- Form processor not detecting positions from cached skeletons\n- Pipeline subscriptions not set up correctly after reinitialize\n- Skeleton events emitting but form processor filtering them out","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-03T03:26:11.354411332Z","updated_at":"2025-12-03T03:33:28.685659925Z","closed_at":"2025-12-03T03:33:28.685659925Z","close_reason":"Fixed by adding tolerance to LivePoseCache.getFrame() - during streaming mode, only use frames within 100ms of requested time. This prevents stale poses from being reused, allowing proper cycle detection and rep counting."}
{"id":"swing-p7z","title":"Run PR review agent before merging DebugTab changes","description":"Run code-reviewer agent on the DebugTab wiring changes before merging to dev. Changes include: SettingsModal.tsx, settings/index.ts, settings.spec.ts, SettingsModal.test.tsx","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-04T01:34:44.458639868Z","updated_at":"2025-12-04T01:37:53.920941989Z","closed_at":"2025-12-04T01:37:53.920941989Z"}
{"id":"swing-pce","title":"Update PoseTrack format to include z-coordinate for BlazePose","description":"Current posetrack JSON only stores x, y, score. Update to include z-coordinate when extracted with BlazePose.\n\nChanges needed:\n1. Update PoseTrackFrame type to include optional z\n2. Update PoseExtractor to save z when using BlazePose\n3. Update PoseTrackSkeletonSource to pass z through\n4. Metadata already has model field to auto-detect format","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T05:49:53.039277884Z","updated_at":"2025-12-03T05:49:53.039277884Z"}
{"id":"swing-pqk","title":"Phase 5: Exercise Abstraction (Pull-ups, Pistol Squats)","description":"Support multiple exercises beyond kettlebell swings","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-03T03:57:01.796276604Z","updated_at":"2025-12-03T03:57:01.796276604Z"}
{"id":"swing-q84","title":"Fix Claude Code status line to show beads issue","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-03T04:32:16.425734621Z","updated_at":"2025-12-03T04:33:07.043310087Z","closed_at":"2025-12-03T04:33:07.043310087Z"}
{"id":"swing-r80","title":"E2E test cache lookup not finding seeded pose data","description":"The 'skeleton redraws on seek' E2E test seeds pose data to IndexedDB but the app doesn't find it. Extraction starts instead of using cached poses. Hash was updated to match swing-sample.webm but lookup still fails. Need to investigate timing or DB access in E2E context.","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-03T04:01:17.164206459Z","updated_at":"2025-12-03T04:01:17.164206459Z"}
{"id":"swing-sxk","title":"Create PoseTrackSkeletonSource","description":"Take PoseTrackFile as input. Iterate frames, build Skeleton from keypoints. Emit Observable\u003cSkeletonEvent\u003e (fast, not throttled).","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T03:57:01.796672729Z","updated_at":"2025-12-03T03:57:01.796672729Z"}
{"id":"swing-ugd","title":"Add unit tests for PoseTrackPipeline with fixture data","description":"Test processAllFrames() returns expected results. Test seeking behavior. Test rep counting accuracy.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T02:10:42.636522471Z","updated_at":"2025-12-03T03:09:50.230772183Z","closed_at":"2025-12-03T03:09:50.230772183Z"}
{"id":"swing-v7v","title":"Wire up DebugTab to Settings modal","description":"DebugTab.tsx exists with SessionRecorder download button but isn't connected to the app. Export from settings/index.ts and add as tab in SettingsModal.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-04T01:23:07.415704521Z","updated_at":"2025-12-04T01:27:39.97645629Z","closed_at":"2025-12-04T01:27:39.97645629Z"}
{"id":"swing-vif","title":"Phase 2: Unit Tests for Analysis Pipeline","description":"Add comprehensive unit tests for the analysis pipeline using hardcoded poseTracks","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-03T02:10:31.855719574Z","updated_at":"2025-12-03T03:10:02.842992661Z","closed_at":"2025-12-03T03:10:02.842992661Z"}
{"id":"swing-vwi","title":"Delete SwingRepProcessor.ts","description":"Rep counting logic already in SwingAnalyzer, delete the wrapper.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-04T04:25:05.429470833Z","updated_at":"2025-12-04T04:25:05.429470833Z","dependencies":[{"issue_id":"swing-vwi","depends_on_id":"swing-1r2","type":"parent-child","created_at":"2025-12-04T04:25:15.271929739Z","created_by":"daemon"},{"issue_id":"swing-vwi","depends_on_id":"swing-ibg","type":"blocks","created_at":"2025-12-04T04:25:15.298443128Z","created_by":"daemon"}]}
