{"id":"swing-9cn","title":"Create KeypointAdapter for MediaPipe to COCO conversion","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T03:54:11.10875198Z","updated_at":"2025-12-03T03:56:10.23033316Z","closed_at":"2025-12-03T03:56:10.23033316Z","dependencies":[{"issue_id":"swing-9cn","depends_on_id":"swing-joq","type":"blocks","created_at":"2025-12-03T03:54:17.737742047Z","created_by":"daemon"}]}
{"id":"swing-f3p","title":"Update SwingFormProcessor to use SwingAnalyzer","description":"Becomes a thin wrapper that subscribes to skeleton source. Delegates to SwingAnalyzer for analysis.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T03:57:01.79496948Z","updated_at":"2025-12-03T03:57:01.79496948Z"}
{"id":"swing-a07","title":"External video requires playing twice before pose detection starts","description":"When loading an external video (not from storage), user has to play the video twice before pose detection kicks in. Investigate different handling paths for external vs loaded videos.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-03T04:19:11.534455831Z","updated_at":"2025-12-03T04:36:34.42028993Z","closed_at":"2025-12-03T04:36:34.42028993Z"}
{"id":"swing-ffw","title":"Fix Tailscale banner showing wrong port","description":"The Tailscale banner in vite.config.ts prints the default port (5173) before Vite checks port availability. When Vite falls back to another port (e.g., 5174), the banner shows the wrong URL. Should detect the actual port Vite uses.","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-12-03T05:11:03.381652145Z","updated_at":"2025-12-03T05:16:45.590865071Z","closed_at":"2025-12-03T05:16:45.590865071Z"}
{"id":"swing-25","title":"Close PR #40: Superseded by PR #44","description":"Close after swing-97v merges PR #40 changes into PR #44","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-03T13:34:37.96073671Z","updated_at":"2025-12-03T14:02:04.010240003Z","closed_at":"2025-12-03T14:02:04.010240003Z","dependencies":[{"issue_id":"swing-25","depends_on_id":"swing-22","type":"blocks","created_at":"2025-12-03T13:35:37.873121955Z","created_by":"import"}]}
{"id":"swing-pqk","title":"Phase 5: Exercise Abstraction (Pull-ups, Pistol Squats)","description":"Support multiple exercises beyond kettlebell swings","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-03T03:57:01.796276604Z","updated_at":"2025-12-03T03:57:01.796276604Z"}
{"id":"swing-6i1","title":"Update UI to select exercise type","description":"Add exercise selection to the UI","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-03T03:57:01.790520693Z","updated_at":"2025-12-03T03:57:01.790520693Z"}
{"id":"swing-6zp","title":"Extract SwingAnalyzer from SwingFormProcessor","description":"Move position detection logic (detectPosition), ideal angles and thresholds, cycle tracking state. Make it a pure class with no RxJS/video dependencies.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T02:11:08.553818516Z","updated_at":"2025-12-03T03:33:07.04709368Z","closed_at":"2025-12-03T03:33:07.04709368Z"}
{"id":"swing-7zf","title":"Add unit tests for SwingFormProcessor position detection","description":"Test each position (Top, Connect, Bottom, Release) with known skeleton data. Test threshold boundaries. Test cycle detection logic.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T02:10:41.084892567Z","updated_at":"2025-12-03T03:09:47.254773529Z","closed_at":"2025-12-03T03:09:47.254773529Z"}
{"id":"swing-ama","title":"Create PoseDetectorFactory","description":"Instantiate correct model based on config. Handle different keypoint formats (COCO-17 vs MediaPipe-33).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T02:11:36.824556318Z","updated_at":"2025-12-03T03:56:11.540932397Z","closed_at":"2025-12-03T03:56:11.540932397Z"}
{"id":"swing-97v","title":"Merge PR #40 unique changes into PR #44","description":"PR #40 has unique changes not in #44:\n- e2e-tests/helpers/video.ts: Status text + auto-play fix\n- CLAUDE.md, PLAN.md: Doc updates\n\nSteps:\n1. Cherry-pick/copy unique files from PR #40 into PR #44 branch\n2. Test to ensure everything works\n3. Push updated PR #44\n4. Close PR #40 as superseded","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-03T13:43:58.051546703Z","updated_at":"2025-12-03T14:01:54.786339026Z","closed_at":"2025-12-03T14:01:54.786339026Z"}
{"id":"swing-23","title":"Merge PR #45: Batch analysis with filmstrip","description":"PR ready with abort mechanism, timeout handling. Filmstrip tests skipped pending mock detector. Rebased on main.","notes":"PR #45 updated: Fixed memory leak and race condition in useFilmstripCapture, added 31 LivePoseCache tests, merged dev branch. 188 unit + 41 E2E tests pass. Ready for merge.","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-03T13:34:36.071162853Z","updated_at":"2025-12-03T15:16:09.288822724Z"}
{"id":"swing-2v2","title":"Fix video playback tests in headless Playwright","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T03:26:39.970351835Z","updated_at":"2025-12-03T03:47:26.608911278Z","closed_at":"2025-12-03T03:47:26.608911278Z"}
{"id":"swing-r80","title":"E2E test cache lookup not finding seeded pose data","description":"The 'skeleton redraws on seek' E2E test seeds pose data to IndexedDB but the app doesn't find it. Extraction starts instead of using cached poses. Hash was updated to match swing-sample.webm but lookup still fails. Need to investigate timing or DB access in E2E context.","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-03T04:01:17.164206459Z","updated_at":"2025-12-03T04:01:17.164206459Z"}
{"id":"swing-dy2","title":"Create keypoint adapter","description":"Map MediaPipe keypoints to COCO format (or vice versa). Ensure Skeleton class works with both.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T03:57:01.794556397Z","updated_at":"2025-12-03T03:57:01.794556397Z"}
{"id":"swing-24","title":"Merge PR #46: Mock pose detector for E2E","description":"PR ready with real pose fixture, hash fix, code review fixes. Enables skipped filmstrip tests. Rebased on main.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-03T13:34:36.862025762Z","updated_at":"2025-12-03T13:34:36.862025762Z","dependencies":[{"issue_id":"swing-24","depends_on_id":"swing-23","type":"blocks","created_at":"2025-12-03T13:38:35.057865479Z","created_by":"daemon"}]}
{"id":"swing-1ji","title":"Create model configuration","description":"Create src/config/modelConfig.ts with model options. Enable runtime model selection.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T02:11:35.965194113Z","updated_at":"2025-12-03T03:56:08.999386724Z","closed_at":"2025-12-03T03:56:08.999386724Z"}
{"id":"swing-dy6","title":"Add elapsed time to extraction progress bar","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T03:26:10.483260322Z","updated_at":"2025-12-03T03:27:13.336453151Z","closed_at":"2025-12-03T03:27:13.336453151Z"}
{"id":"swing-ugd","title":"Add unit tests for PoseTrackPipeline with fixture data","description":"Test processAllFrames() returns expected results. Test seeking behavior. Test rep counting accuracy.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T02:10:42.636522471Z","updated_at":"2025-12-03T03:09:50.230772183Z","closed_at":"2025-12-03T03:09:50.230772183Z"}
{"id":"swing-j9y","title":"Batch rep counting from cached/extracted poses","description":"Currently reps only count during real-time video playback. Add batch mode rep counting:\n\n1. Pre-compute during extraction: As poses are extracted, run rep processor so results are ready when extraction finishes\n2. Instant analysis on load: When cached poses load, immediately analyze all frames and show final rep count\n\nThis enables instant feedback without waiting for video to play through.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-03T04:46:57.158396096Z","updated_at":"2025-12-03T04:52:59.54158939Z","closed_at":"2025-12-03T04:52:59.54158939Z"}
{"id":"swing-4pj","title":"Move sample files to separate repo (form-analyzer-samples)","description":"Move large sample files to idvorkin-ai/form-analyzer-samples repo to prevent bloating. See GitHub issue #56.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-03T18:41:16.927802482Z","updated_at":"2025-12-03T18:46:28.997423834Z","closed_at":"2025-12-03T18:46:28.997423834Z"}
{"id":"swing-22","title":"Merge PR #44: BlazePose model abstraction","description":"PR ready with error handling, KeypointAdapter, PoseDetectorFactory. Rebased on main.","notes":"PR #44 updated: Fixed directSkeletonTransformerRef model preference bug, added CLAUDE.md docs, 157 unit tests + 41 E2E tests pass. PR #40 closed as superseded.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-03T13:34:35.277968705Z","updated_at":"2025-12-03T15:29:28.085953033Z","closed_at":"2025-12-03T15:29:28.085953033Z","dependencies":[{"issue_id":"swing-22","depends_on_id":"swing-97v","type":"blocks","created_at":"2025-12-03T13:44:05.926052968Z","created_by":"daemon"}]}
{"id":"swing-7s4","title":"Create analyzer factory","description":"Function createAnalyzer(exercise: ExerciseType): ExerciseAnalyzer","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T03:57:01.792018775Z","updated_at":"2025-12-03T03:57:01.792018775Z"}
{"id":"swing-3vi","title":"Add unit tests for SwingRepProcessor rep counting","description":"Test rep completion sequence (Release → Top). Test partial cycles. Test reset behavior.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T02:10:41.924860514Z","updated_at":"2025-12-03T03:09:48.948005756Z","closed_at":"2025-12-03T03:09:48.948005756Z"}
{"id":"swing-joq","title":"Phase 4: Model Abstraction (BlazePose Support)","description":"Support multiple pose detection models (MoveNet, BlazePose)","status":"in_progress","priority":2,"issue_type":"epic","created_at":"2025-12-03T03:57:01.795884188Z","updated_at":"2025-12-03T15:07:30.641102402Z"}
{"id":"swing-bf3","title":"Create exercise-specific analyzers","description":"SwingAnalyzer (existing, refactored), PullUpAnalyzer, PistolSquatAnalyzer","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T03:57:01.792573816Z","updated_at":"2025-12-03T03:57:01.792573816Z"}
{"id":"swing-dds","title":"Verify both paths produce identical results","description":"Add integration test comparing real-time vs batch analysis.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T03:57:01.793858815Z","updated_at":"2025-12-03T03:57:01.793858815Z"}
{"id":"swing-hjq","title":"Update PoseSkeletonTransformer for model abstraction","description":"Accept model type in constructor. Use factory to create detector.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T03:57:01.795400771Z","updated_at":"2025-12-03T03:58:02.329900604Z","closed_at":"2025-12-03T03:58:02.329900604Z"}
{"id":"swing-7b0","title":"Create VideoSkeletonSource","description":"Wrap VideoFrameAcquisition + PoseSkeletonTransformer. Emit Observable\u003cSkeletonEvent\u003e.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T03:57:01.791052025Z","updated_at":"2025-12-03T03:57:01.791052025Z"}
{"id":"swing-7ii","title":"Phase 3: Unified Pipeline Refactor","description":"Extract shared analysis logic so both real-time and batch modes use the same code","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-03T03:57:01.791549692Z","updated_at":"2025-12-03T03:57:01.791549692Z"}
{"id":"swing-i62","title":"Disable play button until video is loaded","description":"Play button should be disabled until a video is loaded. Currently it may be clickable before video is ready, which could cause errors or undefined behavior.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-03T04:09:44.93500552Z","updated_at":"2025-12-03T15:07:30.641689436Z","closed_at":"2025-12-03T04:11:44.97742463Z"}
{"id":"swing-vif","title":"Phase 2: Unit Tests for Analysis Pipeline","description":"Add comprehensive unit tests for the analysis pipeline using hardcoded poseTracks","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-03T02:10:31.855719574Z","updated_at":"2025-12-03T03:10:02.842992661Z","closed_at":"2025-12-03T03:10:02.842992661Z"}
{"id":"swing-q84","title":"Fix Claude Code status line to show beads issue","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-03T04:32:16.425734621Z","updated_at":"2025-12-03T04:33:07.043310087Z","closed_at":"2025-12-03T04:33:07.043310087Z"}
{"id":"swing-cy9","title":"Fix skeleton not redrawing on video seek while paused","description":"VideoFrameAcquisition only emits frames during playback. Need to also emit on 'seeked' event when paused. Fix in src/pipeline/VideoFrameAcquisition.ts. Test exists: e2e-tests/user-journey.spec.ts 'skeleton redraws when video is seeked manually'","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-03T03:49:39.144632874Z","updated_at":"2025-12-03T04:01:05.744661391Z","closed_at":"2025-12-03T04:01:05.744661391Z"}
{"id":"swing-o6o","title":"Debug rep counter not updating with cached poses during playback","description":"## Problem\nRep counter doesn't update when video plays with CachedPoseSkeletonTransformer (streaming mode), even though skeleton overlay renders correctly.\n\n## Context\nWhen extraction starts, VideoSection.tsx calls reinitializeWithLiveCache() which creates a new pipeline using CachedPoseSkeletonTransformer instead of the ML-based PoseSkeletonTransformer. The skeleton overlay works (proving cached poses are being read), but rep count stays at 0.\n\n## Key Files to Investigate\n- `src/hooks/useSwingAnalyzer.tsx` lines 145-170 - pipeline subscription setup, setRepCount callback\n- `src/pipeline/Pipeline.ts` - full pipeline flow: skeleton → form → rep\n- `src/pipeline/CachedPoseSkeletonTransformer.ts` - transforms frames to skeletons using cached data\n- `src/pipeline/SwingFormProcessor.ts` - detects swing positions (Top, Connect, Bottom, Release)\n- `src/pipeline/SwingRepProcessor.ts` - counts reps based on position sequence\n- `src/components/VideoSection.tsx` lines 52-60 - reinitializeWithLiveCache trigger\n\n## Pipeline Flow\n1. VideoFrameAcquisition emits FrameEvent (on video play/pause)\n2. CachedPoseSkeletonTransformer looks up cached pose → emits SkeletonEvent\n3. SwingFormProcessor detects position → emits FormEvent/checkpoint\n4. SwingRepProcessor counts reps → emits RepEvent\n5. Pipeline.resultSubject pushes to useSwingAnalyzer which calls setRepCount\n\n## Debug Steps\n1. Add console.logs in Pipeline.ts to verify skeleton events emit (line 72-75)\n2. Check if formProcessor.processFrame receives skeletons (line 84-86)\n3. Check if repProcessor.updateRepCount receives checkpoints (line 97-100)\n4. Verify setRepCount callback is being called (useSwingAnalyzer.tsx line 150)\n\n## Hypothesis\nThe issue might be:\n- Form processor not detecting positions from cached skeletons\n- Pipeline subscriptions not set up correctly after reinitialize\n- Skeleton events emitting but form processor filtering them out","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-03T03:26:11.354411332Z","updated_at":"2025-12-03T03:33:28.685659925Z","closed_at":"2025-12-03T03:33:28.685659925Z"}
{"id":"swing-sxk","title":"Create PoseTrackSkeletonSource","description":"Take PoseTrackFile as input. Iterate frames, build Skeleton from keypoints. Emit Observable\u003cSkeletonEvent\u003e (fast, not throttled).","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T03:57:01.796672729Z","updated_at":"2025-12-03T03:57:01.796672729Z"}
{"id":"swing-21o","title":"Create ExerciseDefinition interface","description":"Interface with name, positions, idealAngles (Map\u003cstring, AngleConfig\u003e), and repCriteria.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T03:57:01.789648693Z","updated_at":"2025-12-03T03:57:01.789648693Z"}
{"id":"swing-arz","title":"Use z-coordinate to correct angle measurements for off-axis camera","description":"Currently all angle calculations in Skeleton.ts are purely 2D (x,y only). The z-depth from BlazePose is preserved but unused.\n\nUse case: When user isn't perfectly sideways to camera, 2D angles are skewed.\n\nImplementation:\n1. Detect body orientation from z-depth (e.g., left_shoulder.z vs right_shoulder.z)\n2. Calculate rotation angle: atan2(shoulder_z_diff, shoulder_x_diff)\n3. Apply correction factor to 2D measurements: scale by 1/cos(rotation)\n\nThis would improve accuracy for users who can't get perfect side-on camera positioning.\n\nDepends on BlazePose integration (swing-joq).","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-03T05:35:50.99657138Z","updated_at":"2025-12-03T05:35:50.99657138Z"}
{"id":"swing-d0l","title":"Update PoseTrackPipeline to use SwingAnalyzer","description":"Delete duplicated position detection logic (lines 354-419). Use shared SwingAnalyzer instance.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-03T03:57:01.793036482Z","updated_at":"2025-12-03T03:57:01.793036482Z"}
{"id":"swing-en3","title":"Redraw skeleton on manual video seek","description":"## Problem\nWhen user seeks/scrubs to a different position in the video while paused, the skeleton overlay does not redraw for that frame. The canvas remains blank until playback resumes.\n\n## E2E Test Added\n- `e2e-tests/user-journey.spec.ts` - \"Skeleton Redraw on Seek\" test section\n- Test confirms bug: `skeleton redraws when video is seeked manually` FAILS\n- Canvas has no content after seek while paused\n\n## Root Cause (to investigate)\nThe `VideoFrameAcquisition` only emits frames when video is playing:\n```javascript\nthis.videoElement.paused ? NEVER : interval(frameInterval)...\n```\n\nNeed to also emit a frame on the 'seeked' event when paused.\n\n## Files to Fix\n- `src/pipeline/VideoFrameAcquisition.ts` - add seeked event handler\n- Possibly `src/hooks/useSwingAnalyzer.tsx` - ensure skeleton renders on seek","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-03T03:46:54.766114968Z","updated_at":"2025-12-03T03:49:31.845251565Z","closed_at":"2025-12-03T03:49:31.845251565Z"}
